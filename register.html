<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="maximum-scale=1.0,minimum-scale=1.0,user-scalable=0,width=device-width,initial-scale=1.0"
    />
    <title>注册</title>
    <link rel="stylesheet" type="text/css" href="../css/api.css" />
    <link rel="stylesheet" type="text/css" href="../css/aui.2.0.css" />
    <link rel="stylesheet" type="text/css" href="../css/login.css" />
    <link rel="stylesheet" href="./css/dialog.css" />
    <script src="./js/rem.js" charset="utf-8"></script>
  </head>

  <body>
    <div class="r-container aui-content-padded">
      <div class="inputBox-bar pingfangRegular" style="margin-bottom: .75rem;">
        <div class="inputBox-bar-name aui-clearfix">
          <div class="phoneNum float-l">手&nbsp;机&nbsp;号</div>
        </div>
        <div class="inputBox-bar-input">
          <input
            type="tel"
            maxlength="11"
            id="phone"
            class="color-66 pingfangRegular tel_"
          />
        </div>
      </div>
      <div class="inputBox-bar pingfangRegular" style="margin-bottom: .75rem;">
        <div class="inputBox-bar-name aui-clearfix">
          <div class="phoneNum float-l">验&nbsp;证&nbsp;码</div>
        </div>
        <div class="inputBox-bar-input">
          <input
            type="number"
            id="code"
            class="code-input color-66 pingfangRegular"
          />
          <div
            id="getCode"
            class="aui-btn getCode-btn color-66 pingfangRegular"
            tapmode
          >
            获&nbsp;取&nbsp;验&nbsp;证&nbsp;码
          </div>
        </div>
      </div>
      <div class="inputBox-bar pingfangRegular" style="margin-bottom: .75rem;">
        <div class="inputBox-bar-name aui-clearfix">
          <div class="phoneNum float-l">密&nbsp;码</div>
        </div>
        <div class="inputBox-bar-input">
          <input
            type="text"
            id="password"
            class="color-66 pingfangRegular pwd"
          />
        </div>
      </div>
      <div class="inputBox-bar pingfangRegular" style="margin-bottom: .75rem;">
        <div class="inputBox-bar-name aui-clearfix">
          <div class="phoneNum float-l">确&nbsp;认&nbsp;密&nbsp;码</div>
          <div class="prompt float-r">
            X&nbsp;两&nbsp;次&nbsp;密&nbsp;码&nbsp;不&nbsp;一&nbsp;致
          </div>
        </div>
        <div class="inputBox-bar-input">
          <input
            type="text"
            id="repassword"
            class="color-66 pingfangRegular rpwd"
          />
        </div>
      </div>
      <div class="inputBox-bar pingfangRegular" style="margin-bottom: .75rem;">
        <div class="inputBox-bar-name aui-clearfix">
          <div class="phoneNum float-l">姓&nbsp;名</div>
        </div>
        <div class="inputBox-bar-input">
          <input type="text" id="name" class="color-66 pingfangRegular" />
        </div>
      </div>
      <!--
        <div class="inputBox-bar pingfangRegular" style="margin-bottom: .75rem;">
            <div class="inputBox-bar-name aui-clearfix">
                <div class="phoneNum float-l">身&nbsp;份&nbsp;证&nbsp;号</div>
            </div>
            <div class="inputBox-bar-input">
                <input type="text" id="number" class="color-66 pingfangRegular">
            </div>
        </div>
      -->
      <div class="inputBox-bar pingfangRegular" style="margin-bottom: .75rem;">
        <div class="inputBox-bar-name aui-clearfix">
          <div class="phoneNum float-l">性&nbsp;别</div>
        </div>
        <div class="inputBox-bar-input sex">
          <div class="input-sex-box float-l select-item" sex="男">男</div>
          <div class="input-sex-box float-r" sex="女">女</div>
        </div>
      </div>
      <div class="inputBox-bar pingfangRegular" style="margin-bottom: .75rem;">
        <div class="inputBox-bar-name aui-clearfix">
          <div class="phoneNum float-l">出&nbsp;生&nbsp;年&nbsp;月</div>
        </div>
        <div class="inputBox-bar-input" style="position: relative;">
          <div class="input-birthday-box float-l">
            <input type="text" id="year" maxlength="4" />
          </div>
          <div class="small-line"></div>
          <div class="input-birthday-box float-r">
            <input type="text" id="month" maxlength="2" />
          </div>
        </div>
      </div>
      <div class="inputBox-bar pingfangRegular" style="margin-bottom: .75rem;">
        <div class="inputBox-bar-name aui-clearfix">
          <div class="phoneNum float-l">民&nbsp;族</div>
        </div>
        <div class="inputBox-bar-input">
          <input type="text" id="nation" class="color-66 pingfangRegular" />
        </div>
      </div>
      <!--
        <div class="inputBox-bar pingfangRegular" style="margin-bottom: .75rem;">
            <div class="inputBox-bar-name aui-clearfix">
                <div class="phoneNum float-l">职&nbsp;业</div>
            </div>
            <div class="inputBox-bar-input">
                <input type="text" id="work" class="color-66 pingfangRegular">
            </div>
        </div>
        <div class="inputBox-bar pingfangRegular" style="margin-bottom: .75rem;">
            <div class="inputBox-bar-name aui-clearfix">
                <div class="phoneNum float-l">工&nbsp;作&nbsp;单&nbsp;位</div>
            </div>
            <div class="inputBox-bar-input">
                <input type="text" id="work_unit" class="color-66 pingfangRegular">
            </div>
        </div>
        <div class="inputBox-bar pingfangRegular" style="margin-bottom: .75rem;">
            <div class="inputBox-bar-name aui-clearfix">
                <div class="phoneNum float-l">现&nbsp;住&nbsp;址</div>
            </div>
            <div class="inputBox-bar-input">
                <input type="text" id="address" class="color-66 pingfangRegular">
            </div>
        </div>
        <div class="inputBox-bar pingfangRegular" style="margin-bottom: .75rem;">
            <div class="inputBox-bar-name aui-clearfix">
                <div class="phoneNum float-l">婚&nbsp;姻&nbsp;状&nbsp;况</div>
            </div>
            <div class="inputBox-bar-input marriage">
                <div class="input-marriage-box float-l select-sex" marriage="已婚" tapmode>已婚</div>
                <div class="input-marriage-box float-r select-item" marriage="未婚" tapmode>未婚</div>
            </div>
        </div>
      -->
      <div class="btnBox pingfangRegular" style="margin-top: 1.9rem;">
        <div class="input-select-box">
          <span id="consent" class="consentAgreement"></span>
          <a
            href="./userProtocol.html"
            class="color-66"
            id="toUserProtocol"
            tapmode
            styel="margin-bottom: 0;"
            >&nbsp;同&nbsp;意&nbsp;<span style="color: #0062cc;"
              >《用&nbsp;户&nbsp;协&nbsp;议》</span
            ></a
          >
        </div>
        <div class="aui-btn aui-btn-block login-btn" id="register">
          注&nbsp;册
        </div>
      </div>
    </div>
  </body>
  <script src="./js/zepto.min.js"></script>
  <script src="./js/touch.js"></script>
  <script src="./js/dialog.js"></script>
  <script src="./js/mydialog.js"></script>
  <script type="text/javascript" src="./js/sha1.js"></script>
  <script type="text/javascript">
    // 获取性别,是否结婚
    var $selectSex = $('.input-sex-box');
    var selectSexL = $selectSex.length;

    for (var i = 0; i < selectSexL; i++) {
      $selectSex.eq(i).tap(function() {
        $(this)
          .addClass('select-item')
          .siblings()
          .removeClass('select-item');
      });
    }
    //是否同意用户协议
    $('#consent').tap(function() {
      $(this).toggleClass('consentAgreement');
    });

    // ------------获取验证码----------------
    var $getCode = $('#getCode');
    var countdown = 60;

    $getCode.tap(function() {
      if ($('#phone').val() == '') {
        noticeDialog('请输入手机号');
        return false;
      } else if (countdown < 60) {
        return false;
      } else {
        settime();
      }
    });

    function settime() {
      if (countdown == 0) {
        $getCode.html('获&nbsp;取&nbsp;验&nbsp;证&nbsp;码');
        // $api.rmEvt(getCode, 'click');
        countdown = 60;
        return false;
      } else {
        $getCode.html('重&nbsp;新&nbsp;发&nbsp;送(' + countdown + ')');
        countdown--;
      }

      setTimeout(function() {
        settime();
      }, 1000);
    }

    //验证确认密码
    function pwdTest() {
      if ($('.rpwd').val() != $('.pwd').val()) {
        $('.prompt').css('display', 'block');
      } else if ($('.rpwd').val() == $('.pwd').val()) {
        $('.prompt').css('display', 'none');
      }
    }
    $('.rpwd').on('blur', function() {
      pwdTest();
    });
    $('.pwd').on('blur', function() {
      pwdTest();
    });

    //注册
    var $inputs = $('input');

    $('#register').tap(function() {
      var boolFrm = checkFrm();
      if (!boolFrm) {
        return false;
      }
      window.location.href = './login.html';
    });

    function checkFrm() {
      var isOk = true;
      for (var i = 0; i < $inputs.length; i++) {
        if ($inputs.eq(i).val() == '') {
          noticeDialog('输入项不能为空');
          isOk = false;
          break;
        }
      }
      if (isOk) {
        if ($('.rpwd').val() != $('.pwd').val()) {
          isOk = false;
          noticeDialog('两次输入的密码不一致');
        }
        if (!$('#consent').hasClass('consentAgreement')) {
          isOk = false;
          noticeDialog('请阅读并同意用户协议');
        }
      }
      return isOk;
    }
  </script>
</html>
